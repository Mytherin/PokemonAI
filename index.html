
<canvas id="pokemoncanvas" style="width:800px;height:450px;margin-left:auto;margin-right:auto;">

</canvas>

<script>
var canvas = document.getElementById("pokemoncanvas");
var c = canvas.getContext("2d");

var HEALTHBAR_HEIGHT = 6;
var HEALTHBAR_WIDTH = 80;
var HEALTHBAR_FONTSIZE = "12";

var backgroundImage = new Image();
backgroundImage.src = 'images/background.png';

var pokemons = ["bulbasaur", "charmander", "squirtle", "pikachu", "jigglypuff", "meowth", "mankey", "pidgey", "ekans", "geodude", "sandshrew", "drowzee", "gastly", "butterfree", "dratini"]
var types = {}
types["water"] = "63B8FF"
types["electric"] = "#CDCD00"
types["fire"] = "#B22222"
types["grass"] = "#228B22"
types["ghost"] = "#5D478B"
types["psychic"] = "#CD6090"
types["normal"] = "#6C7B8B"
types["fighting"] = "#8B4513"
var pokemon_images = {}

String.prototype.toProperCase = function () {
    return this.replace(/\w\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});
};

for (var i = 0; i < pokemons.length; i++) {
	var pkmn = pokemons[i];
	pokemon_images[pkmn] = {};
	var image = new Image();
	image.src = 'images/' + pkmn + '-front.gif'
	pokemon_images[pkmn].front = image;
	var image = new Image();
	image.src = 'images/' + pkmn + '-back.gif'
	pokemon_images[pkmn].back = image;
}

function drawBackground(c, backgroundImage, x, y, width, height) {
	c.drawImage(backgroundImage, x, y, width, height);
}

function drawHealthBar(c, x, y, percentage, name, type) {
	c.font = "bold " + HEALTHBAR_FONTSIZE + "px Calibri";

	var size = c.measureText("HP");
	c.fillStyle = "#1C472B"
	c.fillText("HP", x - size.width - 5, y + HEALTHBAR_FONTSIZE / 4);

	// first draw the background of the health bar
	var grd = c.createLinearGradient(x, y - HEALTHBAR_HEIGHT / 2, x, y + HEALTHBAR_HEIGHT / 2);
	grd.addColorStop(0.0, "#B2B2B2");
	grd.addColorStop(0.5, "#FFFFFF");
	grd.addColorStop(1.0, "#B2B2B2");

	c.fillStyle = grd;
	c.fillRect(x, y - HEALTHBAR_HEIGHT / 2, HEALTHBAR_WIDTH, HEALTHBAR_HEIGHT);
	c.strokeStyle = "#000000";
	c.strokeRect(x, y - HEALTHBAR_HEIGHT / 2, HEALTHBAR_WIDTH, HEALTHBAR_HEIGHT);

	// now draw the foreground
	var grd = c.createLinearGradient(x, y - HEALTHBAR_HEIGHT / 2, x, y + HEALTHBAR_HEIGHT / 2);
	grd.addColorStop(0.0, "#1C472B");
	grd.addColorStop(0.5, "#2BC741");
	grd.addColorStop(1.0, "#1C472B");

	c.fillStyle = grd;
	c.fillRect(x, y - HEALTHBAR_HEIGHT / 2, HEALTHBAR_WIDTH * percentage, HEALTHBAR_HEIGHT);
	c.strokeStyle = "#000000";
	c.strokeRect(x, y - HEALTHBAR_HEIGHT / 2, HEALTHBAR_WIDTH * percentage, HEALTHBAR_HEIGHT);

	var size = c.measureText(name)
	c.fillStyle = "#000000"
	c.fillText(name, x + (HEALTHBAR_WIDTH - size.width) / 2, y - HEALTHBAR_FONTSIZE / 2);

	c.font = "bold " + (HEALTHBAR_FONTSIZE - 2) + "px Calibri";

	c.fillStyle = types[type];
	c.fillRect(x, y + HEALTHBAR_HEIGHT, HEALTHBAR_WIDTH / 2, 10);

	c.strokeStyle = "#000000"
	c.strokeRect(x, y + HEALTHBAR_HEIGHT, HEALTHBAR_WIDTH / 2, 10);

	var size = c.measureText(type.toProperCase());
	c.fillStyle = "#FFFFFF"
	c.fillText(type.toProperCase(), x + (HEALTHBAR_WIDTH / 2 - size.width) / 2, y + HEALTHBAR_HEIGHT + 3 + (HEALTHBAR_FONTSIZE - 2) / 2)

}

function drawPokemon(c, name, type, isFront) {
	var image;
	if (isFront) {
		image = pokemon_images[name.toLowerCase()].front;
	} else {
		image = pokemon_images[name.toLowerCase()].back;
	}
	if (isFront) {
		x = canvas.width - 130;
		y = 5;
	} else {
		x = 20;
		y = canvas.height - 100;
	}
	c.drawImage(image, x, y);
	if (isFront) {
		drawHealthBar(c, 50, 30, 0.75, name, type);
	} else {
		drawHealthBar(c, canvas.width - 40 - HEALTHBAR_WIDTH, canvas.height - 40, 0.75, name, type);
	}
}

drawBackground(c, backgroundImage, 0, 0, canvas.width, canvas.height);
drawPokemon(c, "Pikachu", "electric", false)
drawPokemon(c, "Bulbasaur", "grass", true)

</script>